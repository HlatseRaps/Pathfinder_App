const chapters = [
  {
    title: "1) Interview Mindset & Preparation",
    kicker: "Calm, clear, and prepared beats perfect.",
    blocks: [
      {
        h: "Goals of this course",
        p: `Build real interview confidence with short visual drills, role-play prompts, and ready-to-use answer patterns. You’ll prepare stories, practice delivery, and learn how to read the room.`
      },
      {
        h: "Mindset shifts",
        ul: [
          "You’re a problem-solver, not a supplicant. Frame answers around value you bring.",
          "Preparation reduces anxiety: plan your stories, questions, and logistics.",
          "It’s a conversation. Aim for clarity + curiosity, not memorized speeches."
        ]
      },
      {
        h: "Quick prep checklist",
        ul: [
          "Research: role, company, product/service, recent news.",
          "Job match: 5–7 bullet skills that map to the job description.",
          "Stories: 5 STAR stories (results + metrics).",
          "Logistics: location or link, time zone, contacts, portfolio/CV handy."
        ]
      },
      {
        h: "Visual practice",
        p: `Open your camera app or mirror. Practice your greeting: look at the lens, gentle smile, say your name clearly, then a short “thanks for having me.”`
      }
    ],
    takeaway: [
      "Treat the interview as a value exchange.",
      "Preparation = less anxiety, tighter answers.",
      "Start with a confident, concise greeting."
    ]
  },
  {
    title: "2) Story Bank & STAR Answers",
    kicker: "Memorize moments, not scripts.",
    blocks: [
      {
        h: "STAR in one line",
        ul: [
          "Situation: brief context (1 sentence).",
          "Task: your responsibility (1 sentence).",
          "Action: what you did (2–3 bullets).",
          "Result: outcome with numbers or concrete impact."
        ]
      },
      {
        h: "Build your story bank (5 core stories)",
        ul: [
          "Achievement: biggest win, measurable result.",
          "Challenge: tough problem, what changed.",
          "Teamwork: conflict/resolution or collaboration.",
          "Leadership/Ownership: took initiative without being asked.",
          "Learning/Failure: mistake → lesson → improvement."
        ]
      },
      {
        h: "Practice drill",
        p: `Pick one story. Record yourself giving a 60–90 second STAR answer. Watch it once on mute (body language), once with audio (clarity), then refine.`
      },
      {
        h: "Make results pop",
        ul: [
          "Quantify: “reduced wait times by 18%”, “handled 40+ guests per shift.”",
          "Compare: “from 3 days to 12 hours”, “top 10% of team.”",
          "Name tools/process: PMS, POS, scheduling tools, CRM, spreadsheets."
        ]
      }
    ],
    takeaway: [
      "Keep STAR answers under 90 seconds.",
      "Lead with the result; then how you did it.",
      "Own your impact with numbers and specifics."
    ]
  },
  {
    title: "3) First Impressions & Non-Verbal (Visual Lab)",
    kicker: "Your body speaks before your words.",
    blocks: [
      {
        h: "Camera & frame",
        ul: [
          "Laptop camera at eye level, light facing you (window or lamp).",
          "Neutral background; tidy; notifications off.",
          "Sit slightly forward; shoulders relaxed; lens eye-contact."
        ]
      },
      {
        h: "Body language cues",
        ul: [
          "Open posture, gentle smile on greeting.",
          "Nod while listening; avoid fidgeting; hands visible (waist-up frame).",
          "Pace your speech; brief pauses signal control."
        ]
      },
      {
        h: "Greeting script (10 seconds)",
        p: `“Hi [Name], I’m [Your Name]. Great to meet you and thanks for the time today. I’m excited to discuss how my [skill] can support [team/goal].”`
      },
      {
        h: "Visual drill",
        p: `Record a 20-second greeting. Rewatch on mute: do you look friendly, steady, and engaged? Adjust posture/eye contact until it feels natural.`
      }
    ],
    takeaway: [
      "Eye-level camera + front light = instant upgrade.",
      "Smile in the first 5 seconds; it sets the tone.",
      "Control pace; use pauses to think."
    ]
  },
  {
    title: "4) Answering Common & Tough Questions",
    kicker: "Clear frameworks keep answers crisp under pressure.",
    blocks: [
      {
        h: "Tell me about yourself (45–60s)",
        ul: [
          "Now: 1 line on your current focus/role.",
          "Then: 1–2 relevant highlights (with results).",
          "Future: why this role/team; what value you bring."
        ]
      },
      {
        h: "Why us?",
        ul: [
          "Show research: product/service, guest segment, values.",
          "Link to your skills: “Given your focus on __, my experience in __ helps __.”",
          "Close with impact: “I’m excited to help you achieve __.”"
        ]
      },
      {
        h: "Weakness/failure",
        ul: [
          "Be honest but contained: a real area you improved.",
          "Explain fix: training, checklist, mentor feedback, system.",
          "End with proof: recent example of the new behavior working."
        ]
      },
      {
        h: "Behavioral curveballs",
        ul: [
          "“Difficult colleague/guest?” → STAR + empathy + resolution.",
          "“Handling pressure?” → process + result + metric (e.g., wait times).",
          "“Conflict with manager?” → respect + clarity + outcomes."
        ]
      },
      {
        h: "Practice set (rapid fire)",
        ul: [
          "Record 3 answers: About yourself, Why us, A challenge.",
          "Keep each under 60–90s; cut filler; add 1 number per answer."
        ]
      }
    ],
    takeaway: [
      "Use mini-frameworks; avoid rambling.",
      "Own mistakes + show the fix = maturity.",
      "Quantify impact whenever possible."
    ]
  },
  {
    title: "5) Live Simulation, Questions & Follow-Up",
    kicker: "Close strong: simulate, ask smart questions, and follow through.",
    blocks: [
      {
        h: "Mini mock interview (8–10 minutes)",
        ul: [
          "Warm open (20s greeting).",
          "Two behavioral questions (STAR).",
          "One role scenario (think aloud steps to solve).",
          "Close with your questions (below)."
        ]
      },
      {
        h: "Your questions (pick 2–3)",
        ul: [
          "“What does success look like in the first 90 days?”",
          "“What current challenge can this role immediately help with?”",
          "“How do high performers here collaborate across teams/shifts?”",
          "“What’s the next step and timeline for this process?”"
        ]
      },
      {
        h: "Offer signals without pressure",
        p: `Briefly summarize fit: “From what I’ve heard about __ and __, I’m confident my experience in __ would help __. I’d be excited to contribute.”`
      },
      {
        h: "Follow-up email (template)",
        p: `Subject: Thank you – [Role], [Your Name]\n\nHi [Name],\nThanks for the conversation today. I enjoyed learning about [specific detail]. Based on my experience in [skill], I’m confident I can help with [impact].\nHappy to share references/work samples. Looking forward to next steps.\n\nBest,\n[Your Name]`
      },
      {
        h: "Final visual drill",
        p: `Record your 30-second close: recap fit + enthusiasm + next steps. Rewatch; trim filler; keep tone warm and confident.`
      }
    ],
    takeaway: [
      "Simulate the real thing to reduce nerves.",
      "Ask questions that reveal how you’ll add value.",
      "Close with clarity, then follow up within 24 hours."
    ]
  }
];



    // Rendering logic
    const chapterListEl   = document.getElementById("chapterList");
    const chapterTitleEl  = document.getElementById("chapterTitle");
    const chapterKickerEl = document.getElementById("chapterKicker");
    const chapterContentEl= document.getElementById("chapterContent");
    const chapterCountEl  = document.getElementById("chapterCount");
    const progressBarEl   = document.getElementById("progressBar");
    const progressTextEl  = document.getElementById("progressText");

    const btnPrev  = document.getElementById("btnPrev");
    const btnNext  = document.getElementById("btnNext");
    const btnSave  = document.getElementById("btnSave");
    const btnReset = document.getElementById("btnReset");

    const STORAGE_KEY = "pf_comm_skills_progress";
    let current = parseInt(localStorage.getItem(STORAGE_KEY) || "0", 10);
    if (Number.isNaN(current) || current < 0 || current > chapters.length - 1) current = 0;

    // Build chapter list
    function renderChapterList(){
      chapterListEl.innerHTML = "";
      chapters.forEach((ch, idx) => {
        const li = document.createElement("li");
        const btn = document.createElement("button");
        btn.className = "chapter_btn" + (idx === current ? " active" : "");
        btn.innerHTML = `<i class="far fa-file-alt"></i> ${ch.title}`;
        btn.addEventListener("click", () => {
          current = idx;
          renderAll();
        });
        li.appendChild(btn);
        chapterListEl.appendChild(li);
      });
    }

    function renderChapter(){
      const ch = chapters[current];
      chapterTitleEl.textContent  = ch.title;
      chapterKickerEl.textContent = ch.kicker;
      chapterContentEl.innerHTML  = "";

      ch.blocks.forEach(block => {
        const div = document.createElement("div");
        div.className = "panel";
        const h4 = document.createElement("h4");
        h4.textContent = block.h;
        div.appendChild(h4);

        if (block.p){
          const p = document.createElement("p");
          p.textContent = block.p;
          div.appendChild(p);
        }
        if (block.ul){
          const ul = document.createElement("ul");
          block.ul.forEach(item=>{
            const li = document.createElement("li");
            li.textContent = item;
            ul.appendChild(li);
          });
          div.appendChild(ul);
        }
        chapterContentEl.appendChild(div);
      });

      // Key takeaways
      if (ch.takeaway){
        const t = document.createElement("div");
        t.className = "panel";
        const h4 = document.createElement("h4");
        h4.textContent = "Key Takeaways";
        t.appendChild(h4);
        const ul = document.createElement("ul");
        ch.takeaway.forEach(x=>{
          const li = document.createElement("li");
          li.textContent = x;
          ul.appendChild(li);
        });
        t.appendChild(ul);
        chapterContentEl.appendChild(t);
      }

      chapterCountEl.textContent = `Chapter ${current+1} of ${chapters.length}`;
      // enable/disable nav
      btnPrev.disabled = current === 0;
      btnNext.disabled = current === chapters.length - 1;
    }

    function renderProgress(){
      const pct = Math.round(((current+1) / chapters.length) * 100);
      progressBarEl.style.width = pct + "%";
      progressTextEl.textContent = `${pct}% complete`;
    }

    function renderAll(){
      renderChapterList();
      renderChapter();
      renderProgress();
    }

    // Nav handlers
    btnPrev.addEventListener("click", ()=>{
      if (current > 0){
         current--; renderAll();
     }
    });
    btnNext.addEventListener("click", ()=>{
      if (current < chapters.length - 1){
         current++; renderAll(); 
        }
    });
    btnSave.addEventListener("click", ()=>{
      localStorage.setItem(STORAGE_KEY, String(current));
      alert("Progress saved!");
    });
    btnReset.addEventListener("click", ()=>{
      if (confirm("Reset your course progress?")){
        current = 0;
        localStorage.removeItem(STORAGE_KEY);
        renderAll();
      }
    });

    renderAll();